# æ»¡ä»“ç”Ÿæ€ - uni-appç§»åŠ¨åº”ç”¨

[![uni-app](https://img.shields.io/badge/uni--app-latest-green.svg)](https://uniapp.dcloud.io/)
[![Vue.js](https://img.shields.io/badge/Vue.js-3.x-brightgreen.svg)](https://vuejs.org/)
[![Pinia](https://img.shields.io/badge/Pinia-latest-yellow.svg)](https://pinia.vuejs.org/)

ä¸€ä¸ªåŸºäºuni-appå¼€å‘çš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨ï¼Œä¸“æ³¨äºç§¯åˆ†ç”Ÿæ€ç³»ç»Ÿã€å•†å®¶å…¥é©»ã€ä»£ç†æ¨èç­‰åŠŸèƒ½çš„ç»¼åˆæ€§å¹³å°ã€‚

## ğŸ“± é¡¹ç›®ä»‹ç»

æ»¡ä»“ç”Ÿæ€æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„å•†ä¸šç”Ÿæ€å¹³å°ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

- ğŸ¯ **åŒç§¯åˆ†ç³»ç»Ÿ** - ç»¿è‰²ç§¯åˆ†å’ŒD9èƒ½é‡ç®¡ç†
- ğŸª **å•†å®¶ç”Ÿæ€** - å•†å®¶å…¥é©»ã€è®¤è¯ã€ç®¡ç†
- ğŸ‘¥ **æ¨èä»£ç†** - å¤šå±‚çº§æ¨èå¥–åŠ±æœºåˆ¶
- ğŸ“± **æ‰«ç äº’åŠ¨** - äºŒç»´ç ç§¯åˆ†è·å–
- ğŸ’° **ä¿è¯é‡‘ç³»ç»Ÿ** - èµ„é‡‘å®‰å…¨ä¿éšœ
- ğŸ **ç­¾åˆ°å¥–åŠ±** - æ¯æ—¥ç­¾åˆ°è·å–ç§¯åˆ†

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **uni-app** - è·¨å¹³å°å¼€å‘æ¡†æ¶
- **Vue.js 3** - å“åº”å¼å‰ç«¯æ¡†æ¶
- **Pinia** - çŠ¶æ€ç®¡ç†
- **SCSS** - CSSé¢„å¤„ç†å™¨

### å…³é”®ä¾èµ–
- **@polkadot** - åŒºå—é“¾å·¥å…·åº“ï¼ˆåœ°å€éªŒè¯ã€åŠ å¯†ï¼‰
- **qrcode.vue** - äºŒç»´ç ç»„ä»¶
- **uni-ui** - UIç»„ä»¶åº“

### æ”¯æŒå¹³å°
- ğŸŒ **H5** - ç½‘é¡µç‰ˆ
- ğŸ“± **å¾®ä¿¡å°ç¨‹åº** - å¾®ä¿¡ç”Ÿæ€
- ğŸ“² **App** - iOS/AndroidåŸç”Ÿåº”ç”¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 14.0.0
- npm >= 6.0.0
- HBuilderX æˆ– VS Code

### å®‰è£…ä¾èµ–
```bash
# å…‹éš†é¡¹ç›®
git clone [é¡¹ç›®åœ°å€]
cd money_celestial

# å®‰è£…ä¾èµ–
npm install
```

### å¼€å‘è¿è¡Œ
```bash
# H5å¼€å‘
npm run dev:h5

# å¾®ä¿¡å°ç¨‹åºå¼€å‘
npm run dev:mp-weixin

# Appå¼€å‘
åœ¨HBuilderXä¸­è¿è¡Œåˆ°æ‰‹æœºæˆ–æ¨¡æ‹Ÿå™¨
```

### ç”Ÿäº§æ„å»º
```bash
# æ„å»ºH5
npm run build:h5

# æ„å»ºå¾®ä¿¡å°ç¨‹åº
npm run build:mp-weixin

# æ„å»ºApp
åœ¨HBuilderXä¸­å‘è¡Œ
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
money_celestial/
â”œâ”€â”€ ğŸ“ pages/                    # é¡µé¢ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ index/               # é¦–é¡µæ¨¡å—
â”‚   â”œâ”€â”€ ğŸ“ login/               # ç™»å½•æ³¨å†Œ
â”‚   â”œâ”€â”€ ğŸ“ myAccount/           # ç”¨æˆ·ä¸­å¿ƒ
â”‚   â”œâ”€â”€ ğŸ“ merchant/            # å•†å®¶æ¨¡å—
â”‚   â”œâ”€â”€ ğŸ“ agent/               # ä»£ç†æ¨¡å—
â”‚   â”œâ”€â”€ ğŸ“ recommend/           # æ¨èæ¨¡å—
â”‚   â”œâ”€â”€ ğŸ“ points/              # ç§¯åˆ†ç›¸å…³
â”‚   â””â”€â”€ ğŸ“ webView/             # å†…åµŒé¡µé¢
â”œâ”€â”€ ğŸ“ components/              # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ cityPicker/          # åŸå¸‚é€‰æ‹©
â”‚   â”œâ”€â”€ ğŸ“ navBar/              # å¯¼èˆªæ 
â”‚   â”œâ”€â”€ ğŸ“ PointsPopup/         # ç§¯åˆ†å¼¹çª—
â”‚   â””â”€â”€ ...                     # å…¶ä»–ç»„ä»¶
â”œâ”€â”€ ğŸ“ store/                   # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“„ user.js              # ç”¨æˆ·çŠ¶æ€
â”‚   â””â”€â”€ ğŸ“„ public.js            # å…¬å…±çŠ¶æ€
â”œâ”€â”€ ğŸ“ service/                 # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ ğŸ“„ index.js             # HTTPè¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ ğŸ“„ point.js             # ç§¯åˆ†ç›¸å…³API
â”‚   â”œâ”€â”€ ğŸ“„ merchant.js          # å•†å®¶ç›¸å…³API
â”‚   â””â”€â”€ ...                     # å…¶ä»–API
â”œâ”€â”€ ğŸ“ utils/                   # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“„ index.js             # é€šç”¨å·¥å…·
â”‚   â””â”€â”€ ğŸ“„ distanceSorting.js   # è·ç¦»æ’åº
â”œâ”€â”€ ğŸ“ static/                  # é™æ€èµ„æº
â”œâ”€â”€ ğŸ“ public/                  # å…¬å…±èµ„æº
â”œâ”€â”€ ğŸ“„ App.vue                  # åº”ç”¨å…¥å£
â”œâ”€â”€ ğŸ“„ main.js                  # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ pages.json               # é¡µé¢é…ç½®
â”œâ”€â”€ ğŸ“„ manifest.json            # åº”ç”¨é…ç½®
â””â”€â”€ ğŸ“„ package.json             # é¡¹ç›®é…ç½®
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·ç³»ç»Ÿ
- **æ³¨å†Œç™»å½•** - æ‰‹æœºå·å¯†ç ç™»å½•ã€å¾®ä¿¡ä¸€é”®ç™»å½•
- **ç”¨æˆ·ä¿¡æ¯** - ä¸ªäººèµ„æ–™ç®¡ç†ã€å¤´åƒä¸Šä¼ 
- **å®‰å…¨è®¾ç½®** - å¯†ç ä¿®æ”¹ã€è´¦å·å®‰å…¨

### 2. ç§¯åˆ†ç³»ç»Ÿ
```javascript
// ç§¯åˆ†ç±»å‹
{
  "green_points": "ç»¿è‰²ç§¯åˆ†",    // é€šè¿‡æ‰«ç ã€ç­¾åˆ°ç­‰è·å¾—
  "red_points": "D9èƒ½é‡",       // éœ€è¦å……å€¼è·å¾—ï¼Œå¯æå–
  "deposit": "ä¿è¯é‡‘"           // å•†å®¶/ä»£ç†ä¿è¯é‡‘
}
```

### 3. å•†å®¶æ¨¡å—
- **å•†å®¶å…¥é©»** - èµ„æ–™æäº¤ã€å®¡æ ¸æµç¨‹
- **åº—é“ºç®¡ç†** - åº—é“ºä¿¡æ¯ã€å•†å“å‘å¸ƒ
- **ç§¯åˆ†èµ é€** - å‘ç”¨æˆ·èµ é€ç»¿è‰²ç§¯åˆ†
- **ä¿è¯é‡‘ç®¡ç†** - ä¿è¯é‡‘ç¼´çº³ã€æå–

### 4. ä»£ç†æ¨è
- **ä»£ç†ç”³è¯·** - æˆä¸ºå¹³å°ä»£ç†
- **æ¨èå¥–åŠ±** - å¤šå±‚çº§ä½£é‡‘åˆ†é…
- **å›¢é˜Ÿç®¡ç†** - ä¸‹çº§ä»£ç†ç®¡ç†

### 5. æ‰«ç åŠŸèƒ½
```javascript
// æ‰«ç é€»è¾‘
uni.scanCode({
  scanType: ["qrCode", "wxCode"],
  success: function (res) {
    // å¤„ç†æ‰«ç ç»“æœ
    uni.navigateTo({
      url: "/" + res.path
    });
  }
});
```

## ğŸ” å®‰å…¨æœºåˆ¶

### JWTè®¤è¯
```javascript
// è‡ªåŠ¨Tokenåˆ·æ–°æœºåˆ¶
class Request {
  async refreshToken() {
    const refreshToken = uni.getStorageSync('refreshToken');
    // åˆ·æ–°é€»è¾‘
  }
}
```

### åœ°å€éªŒè¯
```javascript
// Substrateåœ°å€éªŒè¯
import { decodeAddress } from '@polkadot/util-crypto'

export function substrateAddressValidator(address) {
  try {
    if (!address.startsWith('Dn')) return false;
    decodeAddress(address.slice(2));
    return true;
  } catch (error) {
    return false;
  }
}
```

## ğŸ“± å¹³å°é€‚é…

### æ¡ä»¶ç¼–è¯‘
```javascript
// å¾®ä¿¡å°ç¨‹åº
// #ifdef MP-WEIXIN
<button open-type="getPhoneNumber" @getphonenumber="getPhoneNumber">
  ä¸€é”®è·å–æ‰‹æœºå·
</button>
// #endif

// Appç«¯
// #ifdef APP-PLUS
plus.navigator.closeSplashscreen();
// #endif
```

### å“åº”å¼è®¾è®¡
```scss
// ä½¿ç”¨rpxå•ä½é€‚é…ä¸åŒå±å¹•
.container {
  width: 750rpx;
  padding: 30rpx;
}
```

## ğŸŒ APIæ¥å£

### åŸºç¡€é…ç½®
```javascript
// service/index.js
const BASE_URL = 'https://api.example.com/api';  // ç¤ºä¾‹APIåœ°å€
const TIME_OUT = 60000;
```

### ä¸»è¦æ¥å£
| æ¨¡å— | æ¥å£ | è¯´æ˜ |
|------|------|------|
| ç”¨æˆ· | `/users/login/` | ç”¨æˆ·ç™»å½• |
| ç”¨æˆ· | `/users/register/` | ç”¨æˆ·æ³¨å†Œ |
| ç§¯åˆ† | `/points/transactions/` | ç§¯åˆ†è®°å½• |
| å•†å®¶ | `/merchant/` | å•†å®¶ä¿¡æ¯ |
| åº—é“º | `/shops/` | åº—é“ºåˆ—è¡¨ |

## ğŸ¨ UIç»„ä»¶

### è‡ªå®šä¹‰ç»„ä»¶
- **CityPicker** - åŸå¸‚é€‰æ‹©ç»„ä»¶
- **PointsPopup** - ç§¯åˆ†å¼¹çª—
- **NavBar** - è‡ªå®šä¹‰å¯¼èˆªæ 
- **ShopList** - åº—é“ºåˆ—è¡¨

### ä½¿ç”¨ç¤ºä¾‹
```vue
<template>
  <CityPicker @changeCity="bindCityChange" />
  <PointsPopup 
    :visible="showPointsPopup" 
    @close="closePointsPopup" 
  />
</template>
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### å¾®ä¿¡å°ç¨‹åº
1. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å¯¼å…¥é¡¹ç›®
2. é…ç½®AppID
3. é¢„è§ˆ/ä¸Šä¼ ä»£ç 

### H5éƒ¨ç½²
```bash
npm run build:h5
# å°†dist/build/h5ç›®å½•éƒ¨ç½²åˆ°æœåŠ¡å™¨
```

### Appæ‰“åŒ…
1. åœ¨HBuilderXä¸­é…ç½®è¯ä¹¦
2. é€‰æ‹©å‘è¡Œ -> åŸç”ŸApp-äº‘æ‰“åŒ…
3. é…ç½®å‚æ•°åæäº¤æ‰“åŒ…

## ğŸ§ª å¼€å‘è°ƒè¯•

### æ—¥å¿—ç®¡ç†
```javascript
// å¼€å‘ç¯å¢ƒæ—¥å¿—
console.log('ç”¨æˆ·ä¿¡æ¯:', userInfo);

// ç”Ÿäº§ç¯å¢ƒå…³é—­æ—¥å¿—
Vue.config.productionTip = false;
```

### çœŸæœºè°ƒè¯•
```bash
# å®‰è£…uni-appå¼€å‘å·¥å…·
npm install -g @dcloudio/uvm
npm install -g @dcloudio/cli

# è¿è¡Œåˆ°æ‰‹æœº
npm run dev:app-plus
```

## ğŸ“‹ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é…ç½®å¾®ä¿¡ç™»å½•ï¼Ÿ
A: åœ¨manifest.jsonä¸­é…ç½®å¾®ä¿¡AppIDï¼Œå¹¶å®ç°getPhoneNumberæ–¹æ³•ã€‚

### Q: å¦‚ä½•å¤„ç†è·¨åŸŸé—®é¢˜ï¼Ÿ
A: åœ¨manifest.jsonçš„h5é…ç½®ä¸­æ·»åŠ proxyä»£ç†é…ç½®ã€‚

### Q: å¦‚ä½•è‡ªå®šä¹‰å¯¼èˆªæ ï¼Ÿ
A: åœ¨pages.jsonä¸­è®¾ç½®`"navigationStyle": "custom"`ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æˆ‘ä»¬

- **å®¢æœQQ**: [è¯·è”ç³»é¡¹ç›®ç®¡ç†å‘˜è·å–]
- **é¡¹ç›®åœ°å€**: [GitHubä»“åº“åœ°å€]
- **æŠ€æœ¯æ”¯æŒ**: [æŠ€æœ¯æ”¯æŒé‚®ç®±]

---

Â© 2024 æ»¡ä»“ç”Ÿæ€. All rights reserved. 